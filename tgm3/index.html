<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<title>吳彩學庚子年年節計時器</title>

<style>
</style>

</head>
<body>
    <div class="header"></div>
    <div class="content">
        <div>
            <span>今天是 </span>
            <span id="today"></span><br/>
            <span id="year"></span><br/>
            <span>同時也是我們的實況主 吳彩學 的生日，記得跟他說聲生日快樂喔，骯ㄤ骯ㄤ骯ㄤ骯ㄤ</span>
        </div>
    </div>
    <div class="footer"></div>
    
    <script>
    $(document).ready(function(){
        updateToday();
        
        setInterval(function(){
        	   updateToday();
        	}, 1000);
    });
    
    function updateToday () {
    	var week = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
    	var today = new Date();
    	var year = today.getFullYear();
    	var month = today.getMonth() + 1;
    	var date = today.getDate();
    	var day = today.getDay();
    	var hour = today.getHours();
    	var minute = today.getMinutes();
    	var second = today.getSeconds();
    	
    	$("#today").text(year + "年" + formatTime(month) + "月" + formatTime(date) + "日 " + week[day] + " " + formatTime(hour) + "點" + formatTime(minute) + "分" + formatTime(second) + "秒");
    	updateYear(new Date(year, month-1, date, 0, 0, 0));
    }
    
    function updateYear (today) {
    	var lunarYear = new Date(2020, 0, 24, 0, 0, 0);
    	var days = (today.getTime() - lunarYear.getTime()) / (24*60*60*1000);
        $("#year").text(getChineseDay(days));
    }
    
    function getChineseDay (days) {
    	var numbers = ["", "一", "二", "三", "四", "五", "六", "七", "八", "九"];
    	var returnVal = "大年初";
    	if (days > 99) {
    		returnVal += numbers[Math.floor(days/100)] + "百";
            if (days%100 > 9) {
                returnVal += numbers[Math.floor(days%100/10)] + "十";
            } else if (days%100 < 10 && days%100 > 0) {
                returnVal += "零";
    		}
    	}else {
            if (days%100 > 19) {
                returnVal += numbers[Math.floor(days%100/10)] + "十";
            } else if (days%100 > 9 && days%100 < 20) {
                returnVal += "十";
            }
    	}
        returnVal += numbers[Math.floor(days%10)];
    	return returnVal;
    }

    function formatTime(i) {
        return i < 10 ? "0" + i : i;
    }
    </script>
</body>
</html>
(self.webpackChunkcgss_tools=self.webpackChunkcgss_tools||[]).push([[853],{7853:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ie}});var n=a(3978),l=a.n(n),c=a(368),r=a.n(c),o=a(9649),i=a.n(o),s=a(4074),m=a.n(s),u=a(4310),d=a.n(u),g=a(6902),f=a.n(g),h=a(4494),Z=a.n(h),p=a(4473),E=a.n(p),v=a(116),T=a.n(v),x=a(6202),y=a(5843),N=a.n(y),S=a(2991),C=a.n(S),b=a(7766),k=a.n(b),j=a(9340),G=a.n(j),O=a(6295),w=a.n(O),I=a(8914),D=a.n(I),M=a(3649),z=a.n(M),A=a(717),R=a(1509),P=a(3648),F=a(7294),W=(a(6677),a(282)),U=a(5639),_=a(1749),H=a(553),J=a(9570),L=a(7812),V=a(5517),Y=a(2663),q=a(9525),B=a(8286),K=a(4436),Q=a(3700),X=a(2174),$=a(3258),ee=a(6856),te=a(4593),ae=a(4126),ne=a(26),le=a(447),ce=a(8356);function re(e,t){var a=f()(e);if(d()){var n=d()(e);t&&(n=T()(n).call(n,(function(t){return m()(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a,n=null!=arguments[t]?arguments[t]:{};if(t%2)D()(a=re(Object(n),!0)).call(a,(function(t){(0,R.Z)(e,t,n[t])}));else if(i())r()(e,i()(n));else{var c;D()(c=re(Object(n))).call(c,(function(t){l()(e,t,m()(n,t))}))}}return e}function ie(e){var t,a,n,l,c,r=ce.c(),o=e.store,i=(e.dispatch,o.model),s=o.lang;(0,P.Z)(i);var m=(s||{gachaStatistics:{}}).gachaStatistics,u={name:"",color:"default",count:0,isTarget:!0},d={mode:1,addTargetDialogOpen:!1,addTargetState:u,nextGachaDialogOpen:!1,nextGachaState:{gachaNum:0,gachaMember:[]},totalGacha:0,targetCard:[oe(oe({},u),{},{name:le.T(m,"model.gacha.normalSsr","Normal SSR："),isTarget:!1})],steps:[],showAllProgress:!0,menuState:null},g=[{name:le.T(m,"model.type.default","default"),className:"default"},{name:le.T(m,"model.type.cute","キュート"),className:"cute"},{name:le.T(m,"model.type.cool","クール"),className:"cool"},{name:le.T(m,"model.type.passion","パッション"),className:"passion"},{name:le.T(m,"model.type.princess","プリンセス"),className:"princess"},{name:le.T(m,"model.type.fairy","フェアリー"),className:"fairy"},{name:le.T(m,"model.type.angel","エンジェル"),className:"angel"}],f=F.createRef(),h=F.createRef(),p=F.createRef(),v=(0,ne.Z)(d),y=(0,A.Z)(v,3),S=y[0],b=y[1],j=y[2];F.useEffect((function(){console.log(S)}),[S]),F.useEffect((function(){document.title=le.T(m,"title")}),[]),F.useEffect((function(){f.current.scrollIntoView({behavior:"smooth"})}),[S.steps]);var O=function(e){var t;return z()(t="0"+e).call(t,-2)},I=function(){var e,t=0;return D()(e=S.targetCard).call(e,(function(e){t+=e.count})),t},M=function(e){var t;return k()(t="".concat(e," ( ")).call(t,S.totalGacha>0?(e/S.totalGacha*100).toFixed(3):0," %)")},R=function(e){j(e,!1)},re=function(e){j("totalGacha",S.totalGacha+e)},ie=function(e){var t;b(oe(oe({},S),{},{nextGachaDialogOpen:!0,nextGachaState:{gachaNum:e,gachaMember:C()(t=S.targetCard).call(t,(function(e){return oe(oe({},e),{},{count:0})}))}}))},se=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",l=["material-btn"];if("default"===n)l=k()(e=[]).call(e,(0,x.Z)(l),["btn-default"]);else if("cute"===n){var c;l=k()(c=[]).call(c,(0,x.Z)(l),["btn-cute"])}return"cool"===n&&(l=k()(t=[]).call(t,(0,x.Z)(l),["btn-cool"])),"passion"===n&&(l=k()(a=[]).call(a,(0,x.Z)(l),["btn-passion"])),l.join(" ")},me=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",l=["material-content"];if("default"===n)l=k()(e=[]).call(e,(0,x.Z)(l),["content-default"]);else if("cute"===n){var c;l=k()(c=[]).call(c,(0,x.Z)(l),["content-cute"])}return"cool"===n&&(l=k()(t=[]).call(t,(0,x.Z)(l),["content-cool"])),"passion"===n&&(l=k()(a=[]).call(a,(0,x.Z)(l),["content-passion"])),l.join(" ")};return F.createElement(F.Fragment,null,F.createElement(_.Z,{container:!0,justify:"center",spacing:2,item:!0,xs:!0,className:[r.root,"main"].join(" ")},F.createElement(_.Z,{container:!0,justify:"center",item:!0,xs:12},F.createElement(_.Z,{container:!0,justify:"flex-end",item:!0,xs:12},F.createElement("a",{ref:h}),F.createElement("input",{className:"hidden",type:"file",accept:".json",ref:p,onChange:function(){var e=new FileReader;e.onload=function(e){var t;try{t=JSON.parse(e.target.result),b(oe(oe({},S),t))}catch(e){console.log(e.toString())}},e.onerror=function(e){},e.readAsText(p.current.files[0],"UTF-8"),j("menuState",null)},onClick:function(e){e.target.value=null}}),1===S.mode?F.createElement(H.Z,{label:le.T(m,"model.switch.allProgress","All Progress"),className:"highlight-none",color:"primary",control:F.createElement(J.Z,{color:"primary",checked:S.showAllProgress,onChange:function(){j("showAllProgress",!S.showAllProgress)}})}):null,F.createElement(H.Z,{label:le.T(m,"model.switch.specific","Step Record"),className:"highlight-none",color:"primary",disabled:S.totalGacha>0||I()>0,control:F.createElement(J.Z,{color:"primary",checked:1===S.mode,onChange:function(){j("mode",0===S.mode?1:0)}})}),F.createElement(L.Z,{onClick:function(e){j("menuState",e.currentTarget)}},F.createElement(ae.Z,null))),F.createElement(_.Z,{container:!0,justify:"center",alignItems:"center",item:!0,xs:12,className:"row"},F.createElement(_.Z,{container:!0,justify:1===S.mode?"flex-end":"center",alignItems:"center",item:!0,xs:1===S.mode?9:12,className:me()},le.T(m,"model.gacha.totalSsr","Total SSR：")),F.createElement(_.Z,{container:!0,justify:1===S.mode?"flex-start":"center",alignItems:"center",item:!0,xs:1===S.mode?3:12,className:me()},M(I()))),F.createElement(V.Z,{className:"horizontal-solid-divider",variant:"middle"}),C()(t=S.targetCard).call(t,(function(e,t){return F.createElement(_.Z,{key:t,container:!0,justify:"center",alignItems:"center",item:!0,xs:12,className:"row"},t>0?F.createElement(V.Z,{className:"horizontal-dotted-divider",variant:"middle"}):null,F.createElement(_.Z,{container:!0,alignItems:"center",item:!0,xs:1===S.mode?12:10},F.createElement(_.Z,{container:!0,justify:1===S.mode?"flex-end":"center",alignItems:"center",item:!0,xs:1===S.mode?9:12,className:me(e.color)},(e.isTarget?"*":"")+e.name+"："),F.createElement(_.Z,{container:!0,justify:1===S.mode?"flex-start":"center",alignItems:"center",item:!0,xs:1===S.mode?3:12,className:me(e.color)},M(e.count))),1===S.mode?null:F.createElement(_.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:2},0===S.mode?F.createElement(W.Z,{className:se(e.color),size:"small",variant:"contained",onClick:function(){!function(e,t){S.targetCard[t].count+=1,b(oe({},S))}(0,t)}},"+1"):null))})),F.createElement(V.Z,{className:"horizontal-solid-divider",variant:"middle"}),F.createElement(_.Z,{container:!0,justify:"center",alignItems:"center",item:!0,xs:12,className:"row"},F.createElement(_.Z,{container:!0,alignItems:"center",item:!0,xs:8},F.createElement(_.Z,{container:!0,justify:"flex-end",alignItems:"center",item:!0,xs:9,className:me()},le.T(m,"model.gacha.totalGacha","Total Gacha：")),F.createElement(_.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:3,className:me()},S.totalGacha)),F.createElement(_.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:4},0===S.mode?F.createElement(F.Fragment,null,F.createElement(W.Z,{className:se(),size:"small",variant:"contained",onClick:function(){re(1)}},"+1"),F.createElement(W.Z,{className:se(),size:"small",variant:"contained",onClick:function(){re(10)}},"+10"),F.createElement(W.Z,{className:se(),size:"small",variant:"contained",onClick:function(){re(100)}},"+100")):1===S.mode?F.createElement(F.Fragment,null,F.createElement(W.Z,{className:se(),size:"small",variant:"contained",onClick:function(){ie(1)}},"+1"),F.createElement(W.Z,{className:se(),size:"small",variant:"contained",onClick:function(){ie(10)}},"+10")):null)),F.createElement(_.Z,{className:"content-block",container:!0,justify:"flex-start",item:!0,xs:12},C()(a=T()(n=S.steps).call(n,(function(e){return e.gachaMember.length>0||S.showAllProgress}))).call(a,(function(e,t){var a,n;return F.createElement(_.Z,{key:t,container:!0,justify:"center",alignItems:"flex-start",item:!0,xs:12},F.createElement(_.Z,{container:!0,justify:"flex-end",item:!0,xs:4},le.T(m,"model.step.gachaCount.header"),e.progress.start===e.progress.end?e.progress.start:k()(a="".concat(e.progress.start," - ")).call(a,e.progress.end),le.T(m,"model.step.gachaCount.footer"," Gacha：")),F.createElement(_.Z,{container:!0,justify:"flex-start",item:!0,xs:8},0===e.gachaMember.length?le.T(m,"model.step.nothing","Nothing get..."):C()(n=e.gachaMember).call(n,(function(e,t){return F.createElement(_.Z,{key:t+"-"+e.name,className:e.isTarget?"gacha-target":"",item:!0,xs:12},e.name," x ",e.count)}))))})),F.createElement(_.Z,{ref:f})))),F.createElement(Y.Z,{maxWidth:"sm",open:S.addTargetDialogOpen,className:r.root},F.createElement(q.Z,null,F.createElement(_.Z,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},F.createElement(B.Z,{label:"名稱",size:"medium",id:"name",name:"name",type:"text",inputRef:function(e){e&&e.focus()},value:S.addTargetState.name,onChange:function(e){j("addTargetState.name",e.target.value)},error:""===N()(l=S.addTargetState.name).call(l)}),F.createElement(K.Z,{className:"select"},F.createElement(Q.Z,null,le.T(m,"model.addOneDialog.type","Type")),F.createElement(X.Z,{value:S.addTargetState.color,onChange:function(e){j("addTargetState.color",e.target.value)}},C()(g).call(g,(function(e,t){return F.createElement(U.Z,{key:t+"-"+e.name,className:r.customSelectItems+" item-"+e.className,value:e.className},e.name)})))),F.createElement(H.Z,{control:F.createElement($.Z,{checked:S.addTargetState.isTarget,onChange:function(){j("addTargetState.isTarget",!S.addTargetState.isTarget)},name:"subscribe",color:"primary"}),label:le.T(m,"model.addOneDialog.target","本次狙擊目標"),labelPlacement:"end"}))),F.createElement(ee.Z,null,F.createElement(W.Z,{size:"small",variant:"contained",color:"primary",onClick:function(){var e,t,a,n,l;a=(t=S.addTargetState).name,n=t.color,l=t.isTarget,""!==N()(a).call(a)&&j("targetCard",k()(e=[]).call(e,(0,x.Z)(S.targetCard),[oe(oe({},u),{},{name:a,color:n,isTarget:l})]))}},le.T(m,"model.addOneDialog.add","Add")),F.createElement(W.Z,{size:"small",variant:"contained",color:"secondary",onClick:function(){R("addTargetDialogOpen")}},le.T(m,"model.addOneDialog.close","Close")))),F.createElement(Y.Z,{fullWidth:!0,maxWidth:"sm",open:S.nextGachaDialogOpen,className:r.root},F.createElement(q.Z,null,C()(c=S.nextGachaState.gachaMember).call(c,(function(e,t){var a;return F.createElement(K.Z,{key:k()(a="".concat(t,"-")).call(a,e.name),className:"select"},F.createElement(Q.Z,null,e.name),F.createElement(X.Z,{value:S.nextGachaState.gachaMember[t].count,onChange:function(a){!function(e,t,a){var n=S.nextGachaState;t===n.gachaMember[a].name&&(n.gachaMember[a].count=e,j("nextGachaState",n))}(a.target.value,e.name,t)}},function(e,t){var a,n=0;D()(a=S.nextGachaState.gachaMember).call(a,(function(e){n+=e.count}));var l=n-t.count,c=new Array(1+(l>=e?0:e-l));return Z()(c).call(c,""),C()(c).call(c,(function(e,t){return F.createElement(U.Z,{key:t,value:t},t)}))}(S.nextGachaState.gachaNum,e)))}))),F.createElement(ee.Z,null,F.createElement(W.Z,{size:"small",variant:"contained",color:"primary",onClick:function(){var e,t,a,n,l,c;a=S.totalGacha,n=S.targetCard,l=S.nextGachaState,c=S.steps,a+=l.gachaNum,c=k()(e=[]).call(e,(0,x.Z)(c),[{gachaCount:l.gachaNum,gachaMember:T()(t=l.gachaMember).call(t,(function(e){return e.count>0})),progress:{start:a-l.gachaNum+1,end:a}}]),n=C()(n).call(n,(function(e,t){var a,n=E()(a=l.gachaMember).call(a,(function(a,n){return a.count>0&&e.name===a.name&&t===n}));return n&&(e.count+=n.count),e})),b(oe(oe({},S),{},{totalGacha:a,targetCard:n,steps:c,nextGachaDialogOpen:!1}))}},le.T(m,"model.stepDialog.confirm","Confirm")),F.createElement(W.Z,{size:"small",variant:"contained",color:"secondary",onClick:function(){R("nextGachaDialogOpen")}},le.T(m,"model.stepDialog.cancel","Cancel")))),F.createElement(te.Z,{keepMounted:!0,anchorEl:S.menuState,open:!!S.menuState,onClose:function(){j("menuState",null)}},[F.createElement(U.Z,{key:"load",disabled:!1,onClick:function(){p.current.click()}},le.T(m,"model.menu.load","Load")),F.createElement(U.Z,{key:"save",disabled:!1,onClick:function(){var e,t=new Date,a=["[",t.getFullYear(),O(t.getMonth()+1),O(t.getDate()),O(t.getHours()),O(t.getMinutes()),O(t.getSeconds()),"] gacha.json"].join("");h.current.download=a;var n={};D()(e=w()(S)).call(e,(function(e){var t=(0,A.Z)(e,2),a=t[0],l=t[1];"menuState"!==a&&(n[a]=l)})),h.current.href="data:application/json;charset=utf-8,"+encodeURIComponent(G()(n)),h.current.click(),j("menuState",null)}},le.T(m,"model.menu.save","Save")),F.createElement(U.Z,{key:"addOne",disabled:S.totalGacha>0||I()>0,onClick:function(){b(oe(oe({},S),{},{addTargetDialogOpen:!0,addTargetState:u,menuState:null}))}},le.T(m,"model.menu.addOne","Add New Target")),F.createElement(U.Z,{key:"reset",disabled:!(S.totalGacha>0||I()>0||S.targetCard.length>1),onClick:function(){b(d)}},le.T(m,"model.menu.reset","Reset"))]))}},26:function(e,t,a){"use strict";var n=a(3978),l=a.n(n),c=a(368),r=a.n(c),o=a(9649),i=a.n(o),s=a(8914),m=a.n(s),u=a(4074),d=a.n(u),g=a(116),f=a.n(g),h=a(4310),Z=a.n(h),p=a(6902),E=a.n(p),v=a(1509),T=a(5843),x=a.n(T),y=a(717),N=a(7294);function S(e,t){var a=E()(e);if(Z()){var n=Z()(e);t&&(n=f()(n).call(n,(function(t){return d()(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,n=null!=arguments[t]?arguments[t]:{};if(t%2)m()(a=S(Object(n),!0)).call(a,(function(t){(0,v.Z)(e,t,n[t])}));else if(i())r()(e,i()(n));else{var c;m()(c=S(Object(n))).call(c,(function(t){l()(e,t,d()(n,t))}))}}return e}t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=N.useState(e),a=(0,y.Z)(t,2),n=a[0],l=a[1],c=function(e,t){var a=n,c=e.split(".");if(""!==x()(e).call(e)){for(var r=0;r<c.length-1;r++)a[c[r]]||(a[c[r]]={}),a=a[c[r]];a[c[c.length-1]]=t,l(C({},n))}};return[n,l,c]}}}]);
(self.webpackChunkcgss_tools=self.webpackChunkcgss_tools||[]).push([[853],{7853:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return X}});var n=a(3978),c=a.n(n),l=a(368),r=a.n(l),o=a(9649),s=a.n(o),i=a(4074),m=a.n(i),u=a(4310),f=a.n(u),g=a(6902),d=a.n(g),h=a(4494),Z=a.n(h),v=a(4473),E=a.n(v),p=a(116),x=a.n(p),b=a(6202),N=a(5843),S=a.n(N),y=a(2991),C=a.n(y),k=a(1509),G=a(7766),j=a.n(G),I=a(8914),z=a.n(I),M=a(717),O=a(3648),T=a(7294),w=(a(6677),a(1120)),D=a(282),A=a(5639),R=a(1749),F=a(553),W=a(9570),P=a(2663),U=a(9525),_=a(8286),H=a(4436),K=a(3700),V=a(3200),q=a(6856),B=a(26);function J(e,t){var a=d()(e);if(f()){var n=f()(e);t&&(n=x()(n).call(n,(function(t){return m()(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a,n=null!=arguments[t]?arguments[t]:{};if(t%2)z()(a=J(Object(n),!0)).call(a,(function(t){(0,k.Z)(e,t,n[t])}));else if(s())r()(e,s()(n));else{var l;z()(l=J(Object(n))).call(l,(function(t){c()(e,t,m()(n,t))}))}}return e}var Q=w.Z({root:{"& .highlight-none":{webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",oUserSelect:"none",userSelect:"none"},"& .MuiFormControl-root.select":{minWidth:170,margin:5},"& .material-btn":{border:0,borderRadius:3,height:25,minWidth:"auto",margin:3,"&.btn-default":{background:"#e0e0e0","&:hover":{background:"gray"}},"&.btn-cute":{background:"#e6196c"},"&.btn-cool":{background:"#266ce8"},"&.btn-passion":{background:"#febc3f"}},"& .material-content":{"&.content-default":{},"&.content-cute":{color:"#e6196c"},"&.content-cool":{color:"#266ce8"},"&.content-passion":{color:"#febc3f"}},"& .content-block":{display:"block",maxHeight:240,overflow:"auto"}},customSelectItems:{"&.item-default":{},"&.item-cute":{color:"#e6196c"},"&.item-cool":{color:"#266ce8"},"&.item-passion":{color:"#febc3f"}}});function X(e){var t,a,n,c,l,r=Q(),o=e.store,s=(e.dispatch,o.model);(0,O.Z)(s);var i={name:"",color:"default"},m={mode:1,addTargetDialogOpen:!1,addTargetState:i,nextGachaDialogOpen:!1,nextGachaState:{gachaNum:0,gachaMember:[]},totalGacha:0,targetCard:[{name:"非當期常駐SSR",count:0,color:"default"}],steps:[],showAllProgress:!0},u=T.createRef(),f=(0,B.Z)(m),g=(0,M.Z)(f,3),d=g[0],h=g[1],v=g[2];T.useEffect((function(){console.log(d)}),[d]),T.useEffect((function(){u.current.scrollIntoView({behavior:"smooth"})}),[d.steps]);var p=function(){var e,t=0;return z()(e=d.targetCard).call(e,(function(e){t+=e.count})),t},N=function(e){var t;return j()(t="".concat(e," ( ")).call(t,d.totalGacha>0?(e/d.totalGacha*100).toFixed(3):0," %)")},y=function(e){v(e,!1)},k=function(e){v("totalGacha",d.totalGacha+e)},G=function(e){var t;h(L(L({},d),{},{nextGachaDialogOpen:!0,nextGachaState:{gachaNum:e,gachaMember:C()(t=d.targetCard).call(t,(function(e){return{name:e.name,count:0}}))}}))},I=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",c=["material-btn"];if("default"===n)c=j()(e=[]).call(e,(0,b.Z)(c),["btn-default"]);else if("cute"===n){var l;c=j()(l=[]).call(l,(0,b.Z)(c),["btn-cute"])}return"cool"===n&&(c=j()(t=[]).call(t,(0,b.Z)(c),["btn-cool"])),"passion"===n&&(c=j()(a=[]).call(a,(0,b.Z)(c),["btn-passion"])),c.join(" ")},w=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",c=["material-content"];if("default"===n)c=j()(e=[]).call(e,(0,b.Z)(c),["content-default"]);else if("cute"===n){var l;c=j()(l=[]).call(l,(0,b.Z)(c),["content-cute"])}return"cool"===n&&(c=j()(t=[]).call(t,(0,b.Z)(c),["content-cool"])),"passion"===n&&(c=j()(a=[]).call(a,(0,b.Z)(c),["content-passion"])),c.join(" ")};return T.createElement(T.Fragment,null,T.createElement(R.Z,{container:!0,justify:"center",spacing:2,item:!0,xs:!0,className:r.root},T.createElement(R.Z,{container:!0,justify:"center",item:!0,xs:12},T.createElement(R.Z,{container:!0,justify:"flex-start",item:!0,xs:1}),T.createElement(R.Z,{container:!0,justify:"center",item:!0,xs:1}),T.createElement(R.Z,{container:!0,justify:"flex-end",item:!0,xs:10},d.totalGacha>0||p()>0||d.targetCard.length>1?T.createElement(D.Z,{className:I(),size:"small",variant:"contained",onClick:function(){h(m)}},"Reset"):null,1===d.mode?T.createElement(F.Z,{label:"全部過程",className:"highlight-none",control:T.createElement(W.Z,{checked:d.showAllProgress,onChange:function(){v("showAllProgress",!d.showAllProgress)},color:"primary"})}):null,T.createElement(F.Z,{label:"逐次資訊",className:"highlight-none",disabled:d.totalGacha>0||p()>0,control:T.createElement(W.Z,{checked:1===d.mode,onChange:function(){v("mode",0===d.mode?1:0)},color:"primary"})}),T.createElement(D.Z,{className:I(),size:"small",variant:"contained",disabled:d.totalGacha>0||p()>0,onClick:function(){h(L(L({},d),{},{addTargetDialogOpen:!0,addTargetState:i}))}},"追加目標")),T.createElement(R.Z,{className:"spacing",item:!0,xs:12}),T.createElement(R.Z,{container:!0,justify:"flex-end",alignItems:"center",item:!0,xs:5,className:w()},"SSR："),T.createElement(R.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:7,className:w()},N(p())),C()(t=d.targetCard).call(t,(function(e,t){return T.createElement(T.Fragment,{key:t},T.createElement(R.Z,{className:"spacing",item:!0,xs:12}),T.createElement(R.Z,{container:!0,justify:"flex-end",alignItems:"center",item:!0,xs:5,className:w(e.color)},e.name,"："),T.createElement(R.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:3,className:w(e.color)},N(e.count)),T.createElement(R.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:4},0===d.mode?T.createElement(D.Z,{className:I(e.color),size:"small",variant:"contained",onClick:function(){!function(e,t){d.targetCard[t].count+=1,h(L({},d))}(0,t)}},"+1"):null))})),T.createElement(R.Z,{className:"spacing",item:!0,xs:12}),T.createElement(R.Z,{container:!0,justify:"flex-end",alignItems:"center",item:!0,xs:5,className:w()},"總抽數："),T.createElement(R.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:3,className:w()},d.totalGacha),T.createElement(R.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:4},0===d.mode?T.createElement(T.Fragment,null,T.createElement(D.Z,{className:I(),size:"small",variant:"contained",onClick:function(){k(1)}},"+1"),T.createElement(D.Z,{className:I(),size:"small",variant:"contained",onClick:function(){k(10)}},"+10"),T.createElement(D.Z,{className:I(),size:"small",variant:"contained",onClick:function(){k(100)}},"+100")):1===d.mode?T.createElement(T.Fragment,null,T.createElement(D.Z,{className:I(),size:"small",variant:"contained",onClick:function(){G(1)}},"+1"),T.createElement(D.Z,{className:I(),size:"small",variant:"contained",onClick:function(){G(10)}},"+10")):null),T.createElement(R.Z,{className:"content-block",container:!0,justify:"flex-start",item:!0,xs:12},C()(a=x()(n=d.steps).call(n,(function(e){return e.gachaMember.length>0||d.showAllProgress}))).call(a,(function(e,t){var a,n;return T.createElement(R.Z,{key:t,container:!0,justify:"center",alignItems:"flex-start",item:!0,xs:12},T.createElement(R.Z,{container:!0,justify:"flex-end",item:!0,xs:3},"第 ",e.progress.start===e.progress.end?e.progress.start:j()(a="".concat(e.progress.start," - ")).call(a,e.progress.end)," 抽："),T.createElement(R.Z,{container:!0,justify:"flex-start",item:!0,xs:8},0===e.gachaMember.length?" 什麼SSR都沒有...":C()(n=e.gachaMember).call(n,(function(e,t){var a,n;return j()(a=j()(n="".concat(t>0?"、":"")).call(n,e.name," x ")).call(a,e.count)}))))})),T.createElement(R.Z,{ref:u})))),T.createElement(P.Z,{fullWidth:!0,maxWidth:"sm",open:d.addTargetDialogOpen,className:r.root},T.createElement(U.Z,null,T.createElement(R.Z,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},T.createElement(_.Z,{label:"名稱",size:"medium",id:"name",name:"name",type:"text",inputRef:function(e){e&&e.focus()},value:d.addTargetState.name,onChange:function(e){v("addTargetState.name",e.target.value)},error:""===S()(c=d.addTargetState.name).call(c)}),T.createElement(H.Z,{className:"select"},T.createElement(K.Z,null,"屬性"),T.createElement(V.Z,{value:d.addTargetState.color,onChange:function(e){console.log(e,e.target,e.target.value),v("addTargetState.color",e.target.value)}},T.createElement(A.Z,{className:r.customSelectItems+" item-default",value:"default"},"default"),T.createElement(A.Z,{className:r.customSelectItems+" item-cute",value:"cute"},"cute"),T.createElement(A.Z,{className:r.customSelectItems+" item-cool",value:"cool"},"cool"),T.createElement(A.Z,{className:r.customSelectItems+" item-passion",value:"passion"},"passion"))))),T.createElement(q.Z,null,T.createElement(D.Z,{size:"small",variant:"contained",color:"primary",onClick:function(){var e,t=d.addTargetState,a=t.name,n=t.color;""!==S()(a).call(a)&&v("targetCard",j()(e=[]).call(e,(0,b.Z)(d.targetCard),[{name:a,color:n,count:0}]))}},"Add"),T.createElement(D.Z,{size:"small",variant:"contained",color:"secondary",onClick:function(){y("addTargetDialogOpen")}},"Close"))),T.createElement(P.Z,{fullWidth:!0,maxWidth:"sm",open:d.nextGachaDialogOpen,className:r.root},T.createElement(U.Z,null,C()(l=d.nextGachaState.gachaMember).call(l,(function(e,t){var a;return T.createElement(H.Z,{key:j()(a="".concat(t,"-")).call(a,e.name),className:"select"},T.createElement(K.Z,null,e.name),T.createElement(V.Z,{value:d.nextGachaState.gachaMember[t].count,onChange:function(a){!function(e,t,a){var n=d.nextGachaState;t===n.gachaMember[a].name&&(n.gachaMember[a].count=e,v("nextGachaState",n))}(a.target.value,e.name,t)}},function(e,t){var a,n=0;z()(a=d.nextGachaState.gachaMember).call(a,(function(e){n+=e.count}));var c=n-t.count,l=new Array(1+(c>=e?0:e-c));return Z()(l).call(l,""),C()(l).call(l,(function(e,t){return T.createElement(A.Z,{value:t},t)}))}(d.nextGachaState.gachaNum,e)))}))),T.createElement(q.Z,null,T.createElement(D.Z,{size:"small",variant:"contained",color:"primary",onClick:function(){var e,t,a=d.totalGacha,n=d.targetCard,c=d.nextGachaState,l=d.steps;a+=c.gachaNum,l=j()(e=[]).call(e,(0,b.Z)(l),[{gachaCount:c.gachaNum,gachaMember:x()(t=c.gachaMember).call(t,(function(e){return e.count>0})),progress:{start:a-c.gachaNum+1,end:a}}]),n=C()(n).call(n,(function(e,t){var a,n=E()(a=c.gachaMember).call(a,(function(a,n){return a.count>0&&e.name===a.name&&t===n}));return n&&(e.count+=n.count),e})),h(L(L({},d),{},{totalGacha:a,targetCard:n,steps:l,nextGachaDialogOpen:!1}))}},"OK"),T.createElement(D.Z,{size:"small",variant:"contained",color:"secondary",onClick:function(){y("nextGachaDialogOpen")}},"Cancel"))))}},26:function(e,t,a){"use strict";var n=a(3978),c=a.n(n),l=a(368),r=a.n(l),o=a(9649),s=a.n(o),i=a(8914),m=a.n(i),u=a(4074),f=a.n(u),g=a(116),d=a.n(g),h=a(4310),Z=a.n(h),v=a(6902),E=a.n(v),p=a(1509),x=a(717),b=a(7294);function N(e,t){var a=E()(e);if(Z()){var n=Z()(e);t&&(n=d()(n).call(n,(function(t){return f()(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,n=null!=arguments[t]?arguments[t]:{};if(t%2)m()(a=N(Object(n),!0)).call(a,(function(t){(0,p.Z)(e,t,n[t])}));else if(s())r()(e,s()(n));else{var l;m()(l=N(Object(n))).call(l,(function(t){c()(e,t,f()(n,t))}))}}return e}t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=b.useState(e),a=(0,x.Z)(t,2),n=a[0],c=a[1],l=function(e,t){for(var a=n,l=e.split("."),r=0;r<l.length-1;r++)a[l[r]]||(a[l[r]]={}),a=a[l[r]];a[l[l.length-1]]=t,c(S({},n))};return[n,c,l]}}}]);
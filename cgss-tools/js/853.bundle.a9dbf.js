(self.webpackChunkcgss_tools=self.webpackChunkcgss_tools||[]).push([[853],{7853:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return me}});var n=a(3978),l=a.n(n),c=a(368),r=a.n(c),o=a(9649),s=a.n(o),i=a(4074),m=a.n(i),u=a(4310),d=a.n(u),g=a(6902),f=a.n(g),h=a(4494),p=a.n(h),Z=a(2762),E=a.n(Z),v=a(4473),y=a.n(v),x=a(116),T=a.n(x),N=a(6202),C=a(5843),S=a.n(C),b=a(2991),k=a.n(b),j=a(7766),G=a.n(j),O=a(9340),I=a.n(O),w=a(6295),D=a.n(w),M=a(8914),z=a.n(M),A=a(3649),R=a.n(A),P=a(717),F=a(1509),W=a(7294),U=a(282),_=a(5639),H=a(1749),J=a(553),L=a(9570),V=a(7812),Y=a(5517),q=a(2663),B=a(9525),K=a(8286),Q=a(4436),X=a(3700),$=a(2174),ee=a(3258),te=a(6856),ae=a(4593),ne=a(3724),le=a(4126),ce=a(26),re=a(447),oe=a(8356);function se(e,t){var a=f()(e);if(d()){var n=d()(e);t&&(n=T()(n).call(n,(function(t){return m()(e,t).enumerable}))),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a,n=null!=arguments[t]?arguments[t]:{};if(t%2)z()(a=se(Object(n),!0)).call(a,(function(t){(0,F.Z)(e,t,n[t])}));else if(s())r()(e,s()(n));else{var c;z()(c=se(Object(n))).call(c,(function(t){l()(e,t,m()(n,t))}))}}return e}function me(e){var t,a,n,l,c,r=oe.c(),o=e.store,s=(e.dispatch,o.model,(o.lang||{gachaStatistics:{}}).gachaStatistics),i={name:"",color:"default",count:0,isTarget:!0},m={mode:1,addTargetDialogOpen:!1,addTargetState:i,nextGachaDialogOpen:!1,nextGachaState:{gachaNum:0,gachaMember:[]},totalGacha:0,targetCard:[ie(ie({},i),{},{name:re.T(s,"model.gacha.normalSsr","Normal SSR："),isTarget:!1})],steps:[],showAllProgress:!0,menuState:null},u=[{name:re.T(s,"model.type.default","default"),className:"default"},{name:re.T(s,"model.type.cute","キュート"),className:"cute"},{name:re.T(s,"model.type.cool","クール"),className:"cool"},{name:re.T(s,"model.type.passion","パッション"),className:"passion"},{name:re.T(s,"model.type.princess","プリンセス"),className:"princess"},{name:re.T(s,"model.type.fairy","フェアリー"),className:"fairy"},{name:re.T(s,"model.type.angel","エンジェル"),className:"angel"}],d=W.createRef(),g=W.createRef(),f=W.createRef(),h=(0,ce.Z)(m),Z=(0,P.Z)(h,3),v=Z[0],x=Z[1],C=Z[2];W.useEffect((function(){console.log(v)}),[v]),W.useEffect((function(){document.title=re.T(s,"title")}),[]),W.useEffect((function(){d.current.scrollIntoView({behavior:"smooth"})}),[v.steps]);var b=function(e){var t;return R()(t="0"+e).call(t,-2)},j=function(){var e,t=0;return z()(e=v.targetCard).call(e,(function(e){t+=e.count})),t},O=function(e){var t;return G()(t="".concat(e," ( ")).call(t,v.totalGacha>0?(e/v.totalGacha*100).toFixed(3):0," %)")},w=function(e){C(e,!1)},M=function(e){C("totalGacha",v.totalGacha+e)},A=function(e){var t;x(ie(ie({},v),{},{nextGachaDialogOpen:!0,nextGachaState:{gachaNum:e,gachaMember:k()(t=v.targetCard).call(t,(function(e){return ie(ie({},e),{},{count:0})}))}}))},F=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",l=["material-btn"];if("default"===n)l=G()(e=[]).call(e,(0,N.Z)(l),["btn-default"]);else if("cute"===n){var c;l=G()(c=[]).call(c,(0,N.Z)(l),["btn-cute"])}return"cool"===n&&(l=G()(t=[]).call(t,(0,N.Z)(l),["btn-cool"])),"passion"===n&&(l=G()(a=[]).call(a,(0,N.Z)(l),["btn-passion"])),l.join(" ")},se=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",l=["material-content"];if("default"===n)l=G()(e=[]).call(e,(0,N.Z)(l),["content-default"]);else if("cute"===n){var c;l=G()(c=[]).call(c,(0,N.Z)(l),["content-cute"])}return"cool"===n&&(l=G()(t=[]).call(t,(0,N.Z)(l),["content-cool"])),"passion"===n&&(l=G()(a=[]).call(a,(0,N.Z)(l),["content-passion"])),l.join(" ")};return W.createElement(W.Fragment,null,W.createElement(H.Z,{container:!0,justify:"center",spacing:2,item:!0,xs:!0,className:[r.root,"main"].join(" ")},W.createElement(H.Z,{container:!0,justify:"center",item:!0,xs:12},W.createElement(H.Z,{container:!0,justify:"center",item:!0,xs:12},W.createElement(H.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:2},1===v.mode?W.createElement(ne.Z,{className:0===v.steps.length?"my-disabled":"my-pointer",disabled:0===v.steps.length,onClick:function(){var e;E()(e=v.steps).call(e,v.steps.length-1,1),C("steps",v.steps)}}):null),W.createElement(H.Z,{container:!0,justify:"flex-end",item:!0,xs:10},W.createElement("a",{ref:g}),W.createElement("input",{className:"hidden",type:"file",accept:".json",ref:f,onChange:function(){var e=new FileReader;e.onload=function(e){var t;try{t=JSON.parse(e.target.result),x(ie(ie({},v),t))}catch(e){console.log(e.toString())}},e.onerror=function(e){},e.readAsText(f.current.files[0],"UTF-8"),C("menuState",null)},onClick:function(e){e.target.value=null}}),1===v.mode?W.createElement(J.Z,{label:re.T(s,"model.switch.allProgress","All Progress"),className:"highlight-none",color:"primary",control:W.createElement(L.Z,{color:"primary",checked:v.showAllProgress,onChange:function(){C("showAllProgress",!v.showAllProgress)}})}):null,W.createElement(J.Z,{label:re.T(s,"model.switch.specific","Step Record"),className:"highlight-none",color:"primary",disabled:v.totalGacha>0||j()>0,control:W.createElement(L.Z,{color:"primary",checked:1===v.mode,onChange:function(){C("mode",0===v.mode?1:0)}})}),W.createElement(V.Z,{onClick:function(e){C("menuState",e.currentTarget)}},W.createElement(le.Z,null)))),W.createElement(H.Z,{container:!0,justify:"center",alignItems:"center",item:!0,xs:12,className:"row"},W.createElement(H.Z,{container:!0,justify:1===v.mode?"flex-end":"center",alignItems:"center",item:!0,xs:1===v.mode?9:12,className:se()},re.T(s,"model.gacha.totalSsr","Total SSR：")),W.createElement(H.Z,{container:!0,justify:1===v.mode?"flex-start":"center",alignItems:"center",item:!0,xs:1===v.mode?3:12,className:se()},O(j()))),W.createElement(Y.Z,{className:"horizontal-solid-divider",variant:"middle"}),k()(t=v.targetCard).call(t,(function(e,t){return W.createElement(H.Z,{key:t,container:!0,justify:"center",alignItems:"center",item:!0,xs:12,className:"row"},t>0?W.createElement(Y.Z,{className:"horizontal-dotted-divider",variant:"middle"}):null,W.createElement(H.Z,{container:!0,alignItems:"center",item:!0,xs:1===v.mode?12:10},W.createElement(H.Z,{container:!0,justify:1===v.mode?"flex-end":"center",alignItems:"center",item:!0,xs:1===v.mode?9:12,className:se(e.color)},(e.isTarget?"*":"")+e.name+"："),W.createElement(H.Z,{container:!0,justify:1===v.mode?"flex-start":"center",alignItems:"center",item:!0,xs:1===v.mode?3:12,className:se(e.color)},O(e.count))),1===v.mode?null:W.createElement(H.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:2},0===v.mode?W.createElement(U.Z,{className:F(e.color),size:"small",variant:"contained",onClick:function(){!function(e,t){v.targetCard[t].count+=1,x(ie({},v))}(0,t)}},"+1"):null))})),W.createElement(Y.Z,{className:"horizontal-solid-divider",variant:"middle"}),W.createElement(H.Z,{container:!0,justify:"center",alignItems:"center",item:!0,xs:12,className:"row"},W.createElement(H.Z,{container:!0,alignItems:"center",item:!0,xs:8},W.createElement(H.Z,{container:!0,justify:"flex-end",alignItems:"center",item:!0,xs:9,className:se()},re.T(s,"model.gacha.totalGacha","Total Gacha：")),W.createElement(H.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:3,className:se()},v.totalGacha)),W.createElement(H.Z,{container:!0,justify:"flex-start",alignItems:"center",item:!0,xs:4},0===v.mode?W.createElement(W.Fragment,null,W.createElement(U.Z,{className:F(),size:"small",variant:"contained",onClick:function(){M(1)}},"+1"),W.createElement(U.Z,{className:F(),size:"small",variant:"contained",onClick:function(){M(10)}},"+10"),W.createElement(U.Z,{className:F(),size:"small",variant:"contained",onClick:function(){M(100)}},"+100")):1===v.mode?W.createElement(W.Fragment,null,W.createElement(U.Z,{className:F(),size:"small",variant:"contained",onClick:function(){A(1)}},"+1"),W.createElement(U.Z,{className:F(),size:"small",variant:"contained",onClick:function(){A(10)}},"+10")):null)),W.createElement(H.Z,{className:"content-block",container:!0,justify:"flex-start",item:!0,xs:12},k()(a=T()(n=v.steps).call(n,(function(e){return e.gachaMember.length>0||v.showAllProgress}))).call(a,(function(e,t){var a,n;return W.createElement(H.Z,{key:t,container:!0,justify:"center",alignItems:"flex-start",item:!0,xs:12},W.createElement(H.Z,{container:!0,justify:"flex-end",item:!0,xs:4},re.T(s,"model.step.gachaCount.header"),e.progress.start===e.progress.end?e.progress.start:G()(a="".concat(e.progress.start," - ")).call(a,e.progress.end),re.T(s,"model.step.gachaCount.footer"," Gacha：")),W.createElement(H.Z,{container:!0,justify:"flex-start",item:!0,xs:8},0===e.gachaMember.length?re.T(s,"model.step.nothing","Nothing get..."):k()(n=e.gachaMember).call(n,(function(e,t){return W.createElement(H.Z,{key:t+"-"+e.name,className:e.isTarget?"gacha-target":"",item:!0,xs:12},e.name," x ",e.count)}))))})),W.createElement(H.Z,{ref:d})))),W.createElement(q.Z,{maxWidth:"sm",open:v.addTargetDialogOpen,className:r.root},W.createElement(B.Z,null,W.createElement(H.Z,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},W.createElement(K.Z,{label:"名稱",size:"medium",id:"name",name:"name",type:"text",inputRef:function(e){e&&e.focus()},value:v.addTargetState.name,onChange:function(e){C("addTargetState.name",e.target.value)},error:""===S()(l=v.addTargetState.name).call(l)}),W.createElement(Q.Z,{className:"select"},W.createElement(X.Z,null,re.T(s,"model.addOneDialog.type","Type")),W.createElement($.Z,{value:v.addTargetState.color,onChange:function(e){C("addTargetState.color",e.target.value)}},k()(u).call(u,(function(e,t){return W.createElement(_.Z,{key:t+"-"+e.name,className:r.customSelectItems+" item-"+e.className,value:e.className},e.name)})))),W.createElement(J.Z,{control:W.createElement(ee.Z,{checked:v.addTargetState.isTarget,onChange:function(){C("addTargetState.isTarget",!v.addTargetState.isTarget)},name:"subscribe",color:"primary"}),label:re.T(s,"model.addOneDialog.target","本次狙擊目標"),labelPlacement:"end"}))),W.createElement(te.Z,null,W.createElement(U.Z,{size:"small",variant:"contained",color:"primary",onClick:function(){var e,t,a,n,l;a=(t=v.addTargetState).name,n=t.color,l=t.isTarget,""!==S()(a).call(a)&&C("targetCard",G()(e=[]).call(e,(0,N.Z)(v.targetCard),[ie(ie({},i),{},{name:a,color:n,isTarget:l})]))}},re.T(s,"model.addOneDialog.add","Add")),W.createElement(U.Z,{size:"small",variant:"contained",color:"secondary",onClick:function(){w("addTargetDialogOpen")}},re.T(s,"model.addOneDialog.close","Close")))),W.createElement(q.Z,{fullWidth:!0,maxWidth:"sm",open:v.nextGachaDialogOpen,className:r.root},W.createElement(B.Z,null,k()(c=v.nextGachaState.gachaMember).call(c,(function(e,t){var a;return W.createElement(Q.Z,{key:G()(a="".concat(t,"-")).call(a,e.name),className:"select"},W.createElement(X.Z,null,e.name),W.createElement($.Z,{value:v.nextGachaState.gachaMember[t].count,onChange:function(a){!function(e,t,a){var n=v.nextGachaState;t===n.gachaMember[a].name&&(n.gachaMember[a].count=e,C("nextGachaState",n))}(a.target.value,e.name,t)}},function(e,t){var a,n=0;z()(a=v.nextGachaState.gachaMember).call(a,(function(e){n+=e.count}));var l=n-t.count,c=new Array(1+(l>=e?0:e-l));return p()(c).call(c,""),k()(c).call(c,(function(e,t){return W.createElement(_.Z,{key:t,value:t},t)}))}(v.nextGachaState.gachaNum,e)))}))),W.createElement(te.Z,null,W.createElement(U.Z,{size:"small",variant:"contained",color:"primary",onClick:function(){var e,t,a,n,l,c;a=v.totalGacha,n=v.targetCard,l=v.nextGachaState,c=v.steps,a+=l.gachaNum,c=G()(e=[]).call(e,(0,N.Z)(c),[{gachaCount:l.gachaNum,gachaMember:T()(t=l.gachaMember).call(t,(function(e){return e.count>0})),progress:{start:a-l.gachaNum+1,end:a}}]),n=k()(n).call(n,(function(e,t){var a,n=y()(a=l.gachaMember).call(a,(function(a,n){return a.count>0&&e.name===a.name&&t===n}));return n&&(e.count+=n.count),e})),x(ie(ie({},v),{},{totalGacha:a,targetCard:n,steps:c,nextGachaDialogOpen:!1}))}},re.T(s,"model.stepDialog.confirm","Confirm")),W.createElement(U.Z,{size:"small",variant:"contained",color:"secondary",onClick:function(){w("nextGachaDialogOpen")}},re.T(s,"model.stepDialog.cancel","Cancel")))),W.createElement(ae.Z,{keepMounted:!0,anchorEl:v.menuState,open:!!v.menuState,onClose:function(){C("menuState",null)}},[W.createElement(_.Z,{key:"load",disabled:!1,onClick:function(){f.current.click()}},re.T(s,"model.menu.load","Load")),W.createElement(_.Z,{key:"save",disabled:!1,onClick:function(){var e,t=new Date,a=["[",t.getFullYear(),b(t.getMonth()+1),b(t.getDate()),b(t.getHours()),b(t.getMinutes()),b(t.getSeconds()),"] gacha.json"].join("");g.current.download=a;var n={};z()(e=D()(v)).call(e,(function(e){var t=(0,P.Z)(e,2),a=t[0],l=t[1];"menuState"!==a&&(n[a]=l)})),g.current.href="data:application/json;charset=utf-8,"+encodeURIComponent(I()(n)),g.current.click(),C("menuState",null)}},re.T(s,"model.menu.save","Save")),W.createElement(_.Z,{key:"addOne",disabled:v.totalGacha>0||j()>0,onClick:function(){x(ie(ie({},v),{},{addTargetDialogOpen:!0,addTargetState:i,menuState:null}))}},re.T(s,"model.menu.addOne","Add New Target")),W.createElement(_.Z,{key:"reset",disabled:!(v.totalGacha>0||j()>0||v.targetCard.length>1),onClick:function(){x(m)}},re.T(s,"model.menu.reset","Reset"))]))}},26:function(e,t,a){"use strict";var n=a(3978),l=a.n(n),c=a(368),r=a.n(c),o=a(9649),s=a.n(o),i=a(8914),m=a.n(i),u=a(4074),d=a.n(u),g=a(116),f=a.n(g),h=a(4310),p=a.n(h),Z=a(6902),E=a.n(Z),v=a(1509),y=a(5843),x=a.n(y),T=a(717),N=a(7294);function C(e,t){var a=E()(e);if(p()){var n=p()(e);t&&(n=f()(n).call(n,(function(t){return d()(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,n=null!=arguments[t]?arguments[t]:{};if(t%2)m()(a=C(Object(n),!0)).call(a,(function(t){(0,v.Z)(e,t,n[t])}));else if(s())r()(e,s()(n));else{var c;m()(c=C(Object(n))).call(c,(function(t){l()(e,t,d()(n,t))}))}}return e}t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=N.useState(e),a=(0,T.Z)(t,2),n=a[0],l=a[1],c=function(e,t){if(""!==x()(e).call(e)){for(var a=n,c=e.split("."),r=0;r<c.length-1;r++)a[c[r]]||(a[c[r]]={}),a=a[c[r]];a[c[c.length-1]]=t,l(S({},n))}};return[n,l,c]}}}]);
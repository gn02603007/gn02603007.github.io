"use strict";(self.webpackChunkcgss_tools=self.webpackChunkcgss_tools||[]).push([[15],{7853:(e,t,a)=>{var n=a(530);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=O.gachaStatisticsStyle(),{store:a,dispatch:n}=e,{model:N,lang:k}=a,{gachaStatistics:F}=k||{gachaStatistics:{}},T={name:"",color:"default",count:0,isTarget:!0},G={mode:1,addTargetDialogOpen:!1,addTargetState:T,nextGachaDialogOpen:!1,nextGachaState:{gachaNum:0,gachaMember:[]},totalGacha:0,targetCard:[{...T,name:x.getStrFromObj(F,"model.gacha.normalSsr","Normal SSR："),isTarget:!1}],steps:[],showAllProgress:!0,menuState:null},w=[{name:x.getStrFromObj(F,"model.type.default","default"),className:"default"},{name:x.getStrFromObj(F,"model.type.cute","キュート"),className:"cute"},{name:x.getStrFromObj(F,"model.type.cool","クール"),className:"cool"},{name:x.getStrFromObj(F,"model.type.passion","パッション"),className:"passion"},{name:x.getStrFromObj(F,"model.type.princess","プリンセス"),className:"princess"},{name:x.getStrFromObj(F,"model.type.fairy","フェアリー"),className:"fairy"},{name:x.getStrFromObj(F,"model.type.angel","エンジェル"),className:"angel"}],M=createRef(),D=createRef(),I=createRef(),[P,z,A]=(0,v.default)(G);useEffect((function(){console.log(P)}),[P]),useEffect((function(){document.title=x.getStrFromObj(F,"title")}),[]),useEffect((function(){M.current.scrollIntoView({behavior:"smooth"})}),[P.steps]);var R=function(e){return("0"+e).slice(-2)},_=function(){var e=new Date,t=["[",e.getFullYear(),R(e.getMonth()+1),R(e.getDate()),R(e.getHours()),R(e.getMinutes()),R(e.getSeconds()),"] gacha.json"].join("");D.current.download=t;var a={};Object.entries(P).forEach((function([e,t]){"menuState"!==e&&(a[e]=t)})),D.current.href="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(a)),D.current.click(),A("menuState",null)},W=function(){var e=0;return P.targetCard.forEach((function(t){e+=t.count})),e},$=function(e){return`${e} ( ${P.totalGacha>0?(t=e,(t/P.totalGacha*100).toFixed(3)):0} %)`;var t},J=function(e){A(e,!1)},U=function(e){A("totalGacha",P.totalGacha+e)},H=function(e){z({...P,nextGachaDialogOpen:!0,nextGachaState:{gachaNum:e,gachaMember:P.targetCard.map((function(e){return{...e,count:0}}))}})},L=function(e="default"){var t=["material-btn"];return"default"===e?t=[...t,"btn-default"]:"cute"===e&&(t=[...t,"btn-cute"]),"cool"===e&&(t=[...t,"btn-cool"]),"passion"===e&&(t=[...t,"btn-passion"]),t.join(" ")},V=function(e="default"){var t=["material-content"];return"default"===e?t=[...t,"content-default"]:"cute"===e&&(t=[...t,"content-cute"]),"cool"===e&&(t=[...t,"content-cool"]),"passion"===e&&(t=[...t,"content-passion"]),t.join(" ")};return l.default.createElement(l.default.Fragment,null,l.default.createElement(f.default,{container:!0,justifyContent:"center",spacing:2,item:!0,xs:!0,className:[t.root,"main"].join(" ")},l.default.createElement(f.default,{container:!0,justifyContent:"center",item:!0,xs:12},l.default.createElement(f.default,{container:!0,justifyContent:"center",item:!0,xs:12},l.default.createElement(f.default,{container:!0,justifyContent:"flex-start",alignItems:"center",item:!0,xs:2},1===P.mode?l.default.createElement(C.default,{className:0===P.steps.length?"my-disabled":"my-pointer",disabled:0===P.steps.length,onClick:function(){P.steps.splice(P.steps.length-1,1),A("steps",P.steps)}}):null),l.default.createElement(f.default,{container:!0,justifyContent:"flex-end",item:!0,xs:10},l.default.createElement("a",{ref:D}),l.default.createElement("input",{className:"hidden",type:"file",accept:".json",ref:I,onChange:function(){var e=new FileReader;e.onload=function(e){var t;try{t=JSON.parse(e.target.result),z({...P,...t})}catch(e){console.log(e.toString())}},e.onerror=function(e){},e.readAsText(I.current.files[0],"UTF-8"),A("menuState",null)},onClick:function(e){e.target.value=null}}),1===P.mode?l.default.createElement(m.default,{label:x.getStrFromObj(F,"model.switch.allProgress","All Progress"),className:"highlight-none",color:"primary",control:l.default.createElement(b.default,{color:"primary",checked:P.showAllProgress,onChange:function(){A("showAllProgress",!P.showAllProgress)}})}):null,l.default.createElement(m.default,{label:x.getStrFromObj(F,"model.switch.specific","Step Record"),className:"highlight-none",color:"primary",disabled:P.totalGacha>0||W()>0,control:l.default.createElement(b.default,{color:"primary",checked:1===P.mode,onChange:function(){A("mode",0===P.mode?1:0)}})}),l.default.createElement(g.default,{onClick:function(e){A("menuState",e.currentTarget)}},l.default.createElement(j.default,null)))),l.default.createElement(f.default,{container:!0,justifyContent:"center",alignItems:"center",item:!0,xs:12,className:"row"},l.default.createElement(f.default,{container:!0,justifyContent:1===P.mode?"flex-end":"center",alignItems:"center",item:!0,xs:1===P.mode?9:12,className:V()},x.getStrFromObj(F,"model.gacha.totalSsr","Total SSR：")),l.default.createElement(f.default,{container:!0,justifyContent:1===P.mode?"flex-start":"center",alignItems:"center",item:!0,xs:1===P.mode?3:12,className:V()},$(W()))),l.default.createElement(i.default,{className:"horizontal-solid-divider",variant:"middle"}),P.targetCard.map((function(e,t){return l.default.createElement(f.default,{key:t,container:!0,justifyContent:"center",alignItems:"center",item:!0,xs:12,className:"row"},t>0?l.default.createElement(i.default,{className:"horizontal-dotted-divider",variant:"middle"}):null,l.default.createElement(f.default,{container:!0,alignItems:"center",item:!0,xs:1===P.mode?12:10},l.default.createElement(f.default,{container:!0,justifyContent:1===P.mode?"flex-end":"center",alignItems:"center",item:!0,xs:1===P.mode?9:12,className:V(e.color)},(e.isTarget?"*":"")+e.name+"："),l.default.createElement(f.default,{container:!0,justifyContent:1===P.mode?"flex-start":"center",alignItems:"center",item:!0,xs:1===P.mode?3:12,className:V(e.color)},$(e.count))),1===P.mode?null:l.default.createElement(f.default,{container:!0,justifyContent:"flex-start",alignItems:"center",item:!0,xs:2},0===P.mode?l.default.createElement(r.default,{className:L(e.color),size:"small",variant:"contained",onClick:function(){!function(e,t){P.targetCard[t].count+=e,z({...P})}(1,t)}},"+1"):null))})),l.default.createElement(i.default,{className:"horizontal-solid-divider",variant:"middle"}),l.default.createElement(f.default,{container:!0,justifyContent:"center",alignItems:"center",item:!0,xs:12,className:"row"},l.default.createElement(f.default,{container:!0,alignItems:"center",item:!0,xs:8},l.default.createElement(f.default,{container:!0,justifyContent:"flex-end",alignItems:"center",item:!0,xs:9,className:V()},x.getStrFromObj(F,"model.gacha.totalGacha","Total Gacha：")),l.default.createElement(f.default,{container:!0,justifyContent:"flex-start",alignItems:"center",item:!0,xs:3,className:V()},P.totalGacha)),l.default.createElement(f.default,{container:!0,justifyContent:"flex-start",alignItems:"center",item:!0,xs:4},0===P.mode?l.default.createElement(l.default.Fragment,null,l.default.createElement(r.default,{className:L(),size:"small",variant:"contained",onClick:function(){U(1)}},"+1"),l.default.createElement(r.default,{className:L(),size:"small",variant:"contained",onClick:function(){U(10)}},"+10"),l.default.createElement(r.default,{className:L(),size:"small",variant:"contained",onClick:function(){U(100)}},"+100")):1===P.mode?l.default.createElement(l.default.Fragment,null,l.default.createElement(r.default,{className:L(),size:"small",variant:"contained",onClick:function(){H(1)}},"+1"),l.default.createElement(r.default,{className:L(),size:"small",variant:"contained",onClick:function(){H(10)}},"+10")):null)),l.default.createElement(f.default,{className:"content-block",container:!0,justifyContent:"flex-start",item:!0,xs:12},P.steps.filter((function(e){return e.gachaMember.length>0||P.showAllProgress})).map((function(e,t){return l.default.createElement(f.default,{key:t,container:!0,justifyContent:"center",alignItems:"flex-start",item:!0,xs:12},l.default.createElement(f.default,{container:!0,justifyContent:"flex-end",item:!0,xs:4},x.getStrFromObj(F,"model.step.gachaCount.header"),e.progress.start===e.progress.end?e.progress.start:`${e.progress.start} - ${e.progress.end}`,x.getStrFromObj(F,"model.step.gachaCount.footer"," Gacha：")),l.default.createElement(f.default,{container:!0,justifyContent:"flex-start",item:!0,xs:8},0===e.gachaMember.length?x.getStrFromObj(F,"model.step.nothing","Nothing get..."):e.gachaMember.map((function(e,t){return l.default.createElement(f.default,{key:t+"-"+e.name,className:e.isTarget?"gacha-target":"",item:!0,xs:12},e.name," x ",e.count)}))))})),l.default.createElement(f.default,{ref:M})))),l.default.createElement(c.default,{maxWidth:"sm",open:P.addTargetDialogOpen,className:t.root},l.default.createElement(d.default,null,l.default.createElement(f.default,{container:!0,justifyContent:"flex-start",alignItems:"center",spacing:2},l.default.createElement(y.default,{label:"名稱",size:"medium",id:"name",name:"name",type:"text",inputRef:function(e){e&&e.focus()},value:P.addTargetState.name,onChange:function(e){A("addTargetState.name",e.target.value)},error:""===P.addTargetState.name.trim()}),l.default.createElement(s.default,{className:"select"},l.default.createElement(h.default,null,x.getStrFromObj(F,"model.addOneDialog.type","Type")),l.default.createElement(S.default,{value:P.addTargetState.color,onChange:function(e){A("addTargetState.color",e.target.value)}},w.map((function(e,a){return l.default.createElement(E.default,{key:a+"-"+e.name,className:t.customSelectItems+" item-"+e.className,value:e.className},e.name)})))),l.default.createElement(m.default,{control:l.default.createElement(o.default,{checked:P.addTargetState.isTarget,onChange:function(){A("addTargetState.isTarget",!P.addTargetState.isTarget)},name:"subscribe",color:"primary"}),label:x.getStrFromObj(F,"model.addOneDialog.target","本次狙擊目標"),labelPlacement:"end"}))),l.default.createElement(u.default,null,l.default.createElement(r.default,{size:"small",variant:"contained",color:"primary",onClick:function(){!function(){var{name:e,color:t,isTarget:a}=P.addTargetState;""!==e.trim()&&A("targetCard",[...P.targetCard,{...T,name:e,color:t,isTarget:a}])}()}},x.getStrFromObj(F,"model.addOneDialog.add","Add")),l.default.createElement(r.default,{size:"small",variant:"contained",color:"secondary",onClick:function(){J("addTargetDialogOpen")}},x.getStrFromObj(F,"model.addOneDialog.close","Close")))),l.default.createElement(c.default,{fullWidth:!0,maxWidth:"sm",open:P.nextGachaDialogOpen,className:t.root},l.default.createElement(d.default,null,P.nextGachaState.gachaMember.map((function(e,t){return l.default.createElement(s.default,{key:`${t}-${e.name}`,className:"select"},l.default.createElement(h.default,null,e.name),l.default.createElement(S.default,{value:P.nextGachaState.gachaMember[t].count,onChange:function(a){!function(e,t,a){var{nextGachaState:n}=P;t===n.gachaMember[a].name&&(n.gachaMember[a].count=e,A("nextGachaState",n))}(a.target.value,e.name,t)}},function(e,t){var a=0;P.nextGachaState.gachaMember.forEach((function(e){a+=e.count}));var n=a-t.count,r=new Array(1+(n>=e?0:e-n));return r.fill(""),r.map((function(e,t){return l.default.createElement(E.default,{key:t,value:t},t)}))}(P.nextGachaState.gachaNum,e)))}))),l.default.createElement(u.default,null,l.default.createElement(r.default,{size:"small",variant:"contained",color:"primary",onClick:function(){!function(){var{totalGacha:e,targetCard:t,nextGachaState:a,steps:n}=P;e+=a.gachaNum,n=[...n,{gachaCount:a.gachaNum,gachaMember:a.gachaMember.filter((function(e){return e.count>0})),progress:{start:e-a.gachaNum+1,end:e}}],t=t.map((function(e,t){var n=a.gachaMember.find((function(a,n){return a.count>0&&e.name===a.name&&t===n}));return n&&(e.count+=n.count),e})),z({...P,totalGacha:e,targetCard:t,steps:n,nextGachaDialogOpen:!1})}()}},x.getStrFromObj(F,"model.stepDialog.confirm","Confirm")),l.default.createElement(r.default,{size:"small",variant:"contained",color:"secondary",onClick:function(){J("nextGachaDialogOpen")}},x.getStrFromObj(F,"model.stepDialog.cancel","Cancel")))),l.default.createElement(p.default,{keepMounted:!0,anchorEl:P.menuState,open:!!P.menuState,onClose:function(){A("menuState",null)}},[l.default.createElement(E.default,{key:"load",disabled:!1,onClick:function(){I.current.click()}},x.getStrFromObj(F,"model.menu.load","Load")),l.default.createElement(E.default,{key:"save",disabled:!1,onClick:_},x.getStrFromObj(F,"model.menu.save","Save")),l.default.createElement(E.default,{key:"addOne",disabled:P.totalGacha>0||W()>0,onClick:function(){z({...P,addTargetDialogOpen:!0,addTargetState:T,menuState:null})}},x.getStrFromObj(F,"model.menu.addOne","Add New Target")),l.default.createElement(E.default,{key:"reset",disabled:!(P.totalGacha>0||W()>0||P.targetCard.length>1),onClick:function(){z(G)}},x.getStrFromObj(F,"model.menu.reset","Reset"))]))};var l=n(a(7294)),r=n(a(8482)),o=n(a(2719)),c=n(a(2651)),u=n(a(706)),d=n(a(478)),i=n(a(3636)),s=n(a(202)),m=n(a(5190)),f=n(a(7108)),g=n(a(1890)),h=n(a(9169)),p=n(a(3537)),E=n(a(2015)),S=n(a(3141)),b=n(a(5574)),y=n(a(5961)),j=n(a(8513)),C=n(a(428)),v=n(a(26)),x=k(a(447)),O=k(a(8356));function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(N=function(e){return e?a:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=N(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}},26:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7294),l=function(e=null){var[t,a]=(0,n.useState)(e);return[t,a,function(e,n){if(""!==e.trim()){for(var l=t,r=e.split("."),o=0;o<r.length-1;o++)l[r[o]]||(l[r[o]]={}),l=l[r[o]];l[r[r.length-1]]=n,a({...t})}}]};t.default=l},447:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStrFromObj=void 0;t.getStrFromObj=function(e={},t="",a=""){for(var n=e,l=t.split("."),r=0;r<l.length;r++){if(void 0===n[l[r]])return a;n=n[l[r]]}return n}}}]);